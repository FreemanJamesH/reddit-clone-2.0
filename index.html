<!DOCTYPE html>
<html lang="en" ng-app="redditApp">

<head>
  <meta charset="UTF-8">
  <title>Reddit Clone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.4.0/animate.min.css">
  <link rel="stylesheet" href="http://bootswatch.com/united/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-moment/0.10.3/angular-moment.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>
  <script src="app.js"></script>
  <script src="services.js"></script>
  <script src="controllers.js"></script>
  <script src="filters.js"></script>
  <script src="directives.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-animate.js"></script>
</head>
<body class=container-fluid ng-controller="MainController">
  <nav class="navbar navbar-default navbar-static-top animated bounceInDown">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Reddit Clone</a>
      </div>
      <div>
        <ul class="nav navbar-nav">
          <li ng-click="changeBool()"><a href="#">+ Submit a post</a></li>
          <form class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <input ng-model="search" type="text" class="form-control" placeholder="Search">
            </div>
          </form>
        </ul>
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sort by {{sortDisplay}}  <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li class="click" ng-click="sortBy('-voteCount')">Votes</li>
              <li class="click" ng-click="sortBy('title')">Title</li>
              <li class="click" ng-click="sortBy('-date')">Date</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <form name="postForm" ng-show="view.postFormBool" ng-submit="submit()">
    <div ng-class="{'has-error':postForm.title.$invalid && postForm.title.$dirty, 'has-success': postForm.title.$valid}" class="form-group">
      <label class="control-label" for="title">Title:</label>
      <input class="form-control" id="title" ng-model="title" type="text" name="title" placeholder="Title" ng-minlength="3" ng-maxlength="255" required>
      <div class="error" ng-show="postForm.title.$invalid && postForm.title.$dirty">
        Title must be between 3 and 255 characters.
      </div>
    </div>
    <div ng-class="{'has-error':postForm.author.$invalid && postForm.author.$dirty, 'has-success': postForm.author.$valid}" class="form-group">
      <label class=control-label class=control-label for="author">Author:</label>
      <input class="form-control" id="author" ng-model="author" type="text" name="author" placeholder="Author" ng-minlength="3" ng-maxlength="36" required>
      <div class="error" ng-show="postForm.author.$invalid && postForm.author.$dirty">
        Author name must be between 3 and 36 characters.
      </div>
    </div>
    <div ng-class="{'has-error':postForm.image.$invalid && postForm.image.$dirty, 'has-success': postForm.image.$valid}" class="form-group">
      <label class=control-label for="image">Image source:</label>
      <input type="text" class="form-control" id="image" ng-model="image" type="text" name="image" placeholder="Image source" ng-pattern="/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/" required>
      <div class="error" ng-show="postForm.image.$invalid && postForm.image.$dirty">
        Please enter a valid URL.
      </div>
    </div>
    <div ng-class="{'has-error':postForm.description.$invalid && postForm.description.$dirty, 'has-success': postForm.description.$valid && postForm.description.$dirty}" class="form-group">
      <label class=control-label for="description">Description:</label>
      <input class="form-control" id="description" ng-model="description" type="text" name="description" placeholder="Description" ng-maxlength="10000">
      <div class="error" ng-show="postForm.description.$invalid && postForm.description.$dirty">
        Please enter a valid description.
      </div>
    </div>
    <input type="submit">
  </form>



  <div class="media">
    <div class='post bg-info' ng-repeat="post in posts | filter: search | orderBy: sortType">
      <div>
        <div class="media-left media-middle">
          <a href="{{post.image}}">
            <img class="media-object" src="{{post.image}}" alt="...">
          </a>
        </div>
        <div class="media-body">
          <h4 class="media-heading">{{post.title}} |  <span ng-click='incrementUp(post)' class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span><span ng-class="{'green': post.voteCount > 0, 'red': post.voteCount < 1}">{{post.voteCount}}</span><span ng-click='incrementDown(post)' class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>

    <span class="right"><h6>Posted by {{post.author}}</h6></span>
    </h4>

          <p>{{post.description}}</p>

          <div class="info">
            <span class="glyphicon glyphicon-calendar" aria-hidden="true">
             {{post.date | amCalendar }} | </span>


            <span class="glyphicon glyphicon-comment" ng-click='showHideComments(post)' aria-hidden="true">
             <ng-pluralize ng-hide="post.commentsBool"
                           count="post.comments.length"
                           when="{'0': 'No comments yet',
                                  '1': 'View 1 comment',
                                  'other': 'View {{post.comments.length}} comments'}">
            </ng-pluralize>
            <ng-pluralize ng-show="post.commentsBool"
                          count="post.comments.length"
                          when="{'0': 'No comments yet',
                                 '1': 'Hide 1 comment',
                                 'other': 'Hide {{post.comments.length}} comments'}">
            </ng-pluralize> | </span>

            <span class="glyphicon glyphicon-pencil" ng-click='showHideCommentForm(post)' aria-hidden="true">
             Add comment </span>

          </div>
          <br>

          <div class="comment" ng-class-odd="'odd'" ng-class-even="'even'" ng-repeat='comment in post.comments' ng-show="post.commentsBool">
            {{comment.author}} said: {{comment.comment}}
          </div>
          <form name="commentForm" ng-show="post.commentFormBool" ng-submit="submitComment(post, newComment[$index], $index, commentForm)">
            <div class="col-md-3">
              <div ng-class="{'has-error':commentForm.commentAuthor.$invalid && commentForm.commentAuthor.$dirty, 'has-success': commentForm.commentAuthor.$valid}" class="form-group">
                <label class="control-label" for="commentAuthor">Author:</label>
                <input class="form-control" id="commentAuthor" ng-model="newComment[$index].author" type="text" name="commentAuthor" placeholder="Author" ng-minlength="3" ng-maxlength="36" required>
                <div class="error" ng-show="commentForm.commentAuthor.$invalid && commentForm.commentAuthor.$dirty">
                  Author name must be between 3 and 255 characters.
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div ng-class="{'has-error':commentForm.comment.$invalid && commentForm.comment.$dirty, 'has-success': commentForm.comment.$valid}" class="form-group">
                <label class=control-label class=control-label for="comment">Comment:</label>
                <input class="form-control" id="comment" ng-model="newComment[$index].comment" type="text" name="comment" placeholder="Comment" ng-minlength="1" ng-maxlength="1000" required>
                <div class="error" ng-show="commentForm.comment.$invalid && commentForm.comment.$dirty">
                  Comment must be between 1 and 1000 characters.
                </div>
              </div>
            </div>
            <div class="col-md-3 submit-center">
              <input type="submit">
            </div>
          </form>
        </div>
      </div>
    </div>

</body>
